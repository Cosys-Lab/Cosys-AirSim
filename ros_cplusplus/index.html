<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>ROS2: AirSim ROS C++ Wrapper - Cosys-AirSim</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "ROS2: AirSim ROS C++ Wrapper";
        var mkdocs_page_input_path = "ros_cplusplus.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Cosys-AirSim
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/CHANGELOG.md">Changelog</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Installing AirSim</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../run_packaged/">Download and run</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../install_precompiled/">Download and install from precompiled plugin</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../install_windows/">Install from Source on Windows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../install_linux/">Install from Source on Linux</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../docker_ubuntu/">Using Docker on Ubuntu</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../unreal_custenv/">Custom Unreal Environment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dynamic_objects/">Dynamic Objects</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using AirSim</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../apis/">Core APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../image_apis/">Image APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../apis_cpp/">C++ APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../instance_segmentation/">Instance Segmentation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../annotation/">Annotation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../settings/">Settings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../camera_views/">Camera Views</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../using_car/">Car Mode</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../remote_control/">Remote Control</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../xbox_controller/">XBox Controller</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../steering_wheel_installation/">Steering Wheel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../multi_vehicle/">Multiple Vehicles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skid_steer_vehicle/">Skid Steer Vehicles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gazebo_drone/">Import Gazebo models</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../retexturing/">Domain Randomization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../meshes/">Mesh Vertex Buffers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../lights/">Artificial Lights</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Sensors</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../sensors/">Sensors</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../lidar/">LIDAR</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../gpulidar/">GPU LIDAR</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../echo/">Pulse Echo</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../InfraredCamera/">Infrared Camera</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../distance_sensor/">Distance Sensor</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">ROS</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../ros_python/">ROS: AirSim ROS Python Wrapper</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">ROS2: AirSim ROS C++ Wrapper</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#build">Build</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#running">Running</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#using-cosys-airsim-ros-wrapper">Using Cosys-Airsim ROS wrapper</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#cosys-airsim-ros-wrapper-node">Cosys-Airsim ROS Wrapper Node</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#simple-pid-position-controller-node">Simple PID Position Controller Node</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../matlab/">Matlab</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../playback/">Playing Logs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../voxel_grid/">Voxel Grid Generator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../event_sim/">Event camera</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Design</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../modify_recording_data/">Modifying Recording Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../flight_controller/">Flight Controller</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adding_new_apis/">Adding new APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simple_flight/">Simple Flight</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">External Flight Controllers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">MavLink and PX4</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../px4_setup/">PX4 Setup for AirSim</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_sitl/">PX4 in SITL</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_sitl_wsl2/">PX4 SITL with WSL 2</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_lockstep/">PX4 Lockstep</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_multi_vehicle/">PX4 Multi-vehicle in SITL</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://youtu.be/1oY8Qu5maQQ">AirSim with Pixhawk</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://youtu.be/HNWdYrtw3f0">PX4 Setup with AirSim</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://www.youtube.com/watch?v=d_FyjKDWQfc&feature=youtu.be">Debugging Attitude Estimation</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://github.com/Microsoft/AirSim/wiki/Intercepting-MavLink-messages">Intercepting MavLink Messages</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://github.com/Microsoft/AirSim/wiki/Rapid-Descent-on-PX4-drones">Rapid Descent on PX4 Drones</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_build/">Building PX4</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_logging/">PX4/MavLink Logging</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../log_viewer/">MavLink LogViewer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../mavlinkcom/">MavLinkCom</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../mavlinkcom_mocap/">MavLink MoCap</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">ArduPilot</a>
    <ul>
                <li class="toctree-l2"><a class="" href="https://ardupilot.org/dev/docs/building-the-code.html">ArduPilot SITL Setup</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://ardupilot.org/dev/docs/sitl-with-airsim.html">AirSim & ArduPilot</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Contributed Tutorials</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://www.youtube.com/watch?v=y09VbdQWvQY">Using Environments from Marketplace</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/simondlevy/AirSimTensorFlow">Simple Collision Avoidance</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://aka.ms/AutonomousDrivingCookbook">Autonomous Driving on Azure</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/Microsoft/AirSim/wiki/hexacopter">Building Hexacopter</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/Microsoft/AirSim/wiki/moveOnPath-demo">Moving on Path Demo</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://youtu.be/Bp86WiLUC80">Importing a custom multirotor mesh</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../object_detection/">Object Detection</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://youtu.be/ZonkdMcwXH4">AirSim with MAVROS and PX4</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Misc</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../custom_drone/">AirSim on Real Drones</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pfm/">pfm format</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../unreal_proj/">Setting up Unreal Environment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../packaging/">Building and Packaging Cosys-AirSim Plugin and/or Unreal Projects</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../unreal_blocks/">Blocks Environment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../working_with_plugin_contents/">Working with UE Plugin Contents</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/Microsoft/AirSim/wiki/technion">Formula Student Technion Self-drive</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Cosys-AirSim</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Using AirSim &raquo;</li>
          <li>ROS &raquo;</li>
      <li>ROS2: AirSim ROS C++ Wrapper</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/Cosys-Lab/Cosys-AirSim/edit/main/docs/ros_cplusplus.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="airsim_ros_pkgs">airsim_ros_pkgs</h1>
<p>A ROS2 wrapper over the Cosys-AirSim C++ client library. All coordinates and data are in the right-handed coordinate frame of the ROS standard and not in NED except for geo points.
The following was tested on Ubuntu 22.04 with ROS2 Iron.</p>
<h2 id="build">Build</h2>
<ul>
<li>
<p>Build Cosys-AirSim as per the instructions.</p>
</li>
<li>
<p>Make sure that you have set up the environment variables for ROS. Add the <code>source</code> command to your <code>.bashrc</code> for convenience (replace <code>iron</code> with specific version name) -</p>
</li>
</ul>
<pre><code class="language-shell">echo &quot;source /opt/ros/iron/setup.bash&quot; &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<p>-- Install dependencies with rosdep, if not already installed -</p>
<pre><code class="language-shell">apt-get install python3-rosdep
sudo rosdep init
rosdep update
cd &lt;path-to-cosys-airsim&gt;/ros2
rosdep install --from-paths src -y --ignore-src --skip-keys pcl --skip-keys message_runtime --skip-keys message_generation
</code></pre>
<ul>
<li>Build ROS package</li>
</ul>
<pre><code class="language-shell">colcon build --cmake-args -DCMAKE_BUILD_TYPE=Release
</code></pre>
<h2 id="running">Running</h2>
<pre><code class="language-shell">source install/setup.bash
ros2 launch airsim_ros_pkgs airsim_node.launch.py
</code></pre>
<h2 id="using-cosys-airsim-ros-wrapper">Using Cosys-Airsim ROS wrapper</h2>
<p>The ROS wrapper is composed of two ROS nodes - the first is a wrapper over Cosys-AirSim's multirotor C++ client library, and the second is a simple PD position controller.
Let's look at the ROS API for both nodes:</p>
<h3 id="cosys-airsim-ros-wrapper-node">Cosys-Airsim ROS Wrapper Node</h3>
<h4 id="publishers">Publishers:</h4>
<p>The publishers will be automatically created based on the settings in the <code>settings.json</code> file for all vehicles and the sensors.</p>
<ul>
<li>
<p><code>/airsim_node/VEHICLE-NAME/car_state</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/CarState.msg">airsim_interfaces::CarState</a>
  The state of the car if the vehicle is of this sim-mode type.</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/computervision_state</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/ComputerVisionState.msg">airsim_interfaces::ComputerVisionState</a>
  The state of the computer vision actor if the vehicle is of this sim-mode type.</p>
</li>
<li>
<p><code>/airsim_node/origin_geo_point</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/GPSYaw.msg">airsim_interfaces::GPSYaw</a>
  GPS coordinates corresponding to global frame. This is set in the airsim's <a href="https://cosys-lab.github.io/settings/">settings.json</a> file under the <code>OriginGeopoint</code> key.</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/global_gps</code> <a href="https://docs.ros.org/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs::NavSatFix</a>
  This the current GPS coordinates of the drone in airsim.</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/environment</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/Environment.msg">airsim_interfaces::Environment</a></p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/odom_local</code> <a href="https://docs.ros.org/api/nav_msgs/html/msg/Odometry.html">nav_msgs::Odometry</a>
  Odometry frame (default name: odom_local, launch name and frame type are configurable) wrt take-off point.</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/CAMERA-NAME_IMAGE-TYPE/camera_info</code> <a href="https://docs.ros.org/api/sensor_msgs/html/msg/CameraInfo.html">sensor_msgs::CameraInfo</a>
  Optionally if the image type is annotation the annotation layer name is also included in the topic name.</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/CAMERA-NAME_IMAGE-TYPE/image</code> <a href="https://docs.ros.org/api/sensor_msgs/html/msg/Image.html">sensor_msgs::Image</a>
  RGB or float image depending on image type requested in settings.json. Optionally if the image type is annotation the annotation layer name is also included in the topic name.</p>
</li>
<li>
<p><code>/tf</code> <a href="https://docs.ros.org/api/tf2_msgs/html/msg/TFMessage.html">tf2_msgs::TFMessage</a></p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/altimeter/SENSOR_NAME</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/Altimeter.msg">airsim_interfaces::Altimeter</a>
  This the current altimeter reading for altitude, pressure, and <a href="https://en.wikipedia.org/wiki/QNH">QNH</a></p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/imu/SENSOR_NAME</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/Imu.html">sensor_msgs::Imu</a>
  IMU sensor data.</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/magnetometer/SENSOR_NAME</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/MagneticField.html">sensor_msgs::MagneticField</a>
  Measurement of magnetic field vector/compass.</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/distance/SENSOR_NAME</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/Range.html">sensor_msgs::Range</a>
  Measurement of distance from an active ranger, such as infrared or IR</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/lidar/points/SENSOR_NAME/</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/PointCloud2.html">sensor_msgs::PointCloud2</a>
  LIDAR pointcloud </p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/lidar/labels/SENSOR_NAME/</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/StringArray.msg">airsim_interfaces::StringArray</a>
  Custom message type with an array of string that are the labels for each point in the pointcloud of the lidar sensor</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/gpulidar/points/SENSOR_NAME/</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/PointCloud2.html">sensor_msgs::PointCloud2</a>
  GPU LIDAR pointcloud. The instance segmentation/annotation color data is stored in the rgb field of the pointcloud. The intensity data is stored as well in the intensity field</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/echo/active/points/SENSOR_NAME/</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/PointCloud2.html">sensor_msgs::PointCloud2</a>
  Echo sensor pointcloud for active sensing</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/echo/passive/points/SENSOR_NAME/</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/PointCloud2.html">sensor_msgs::PointCloud2</a>
  Echo sensor pointcloud for passive sensing</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/echo/active/labels/SENSOR_NAME/</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/StringArray.msg">airsim_interfaces::StringArray</a>
  Custom message type with an array of string that are the labels for each point in the pointcloud for the active echo pointcloud</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/echo/passive/labels/SENSOR_NAME/</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/StringArray.msg">airsim_interfaces::StringArray</a>
  Custom message type with an array of string that are the labels for each point in the pointcloud for the passive echo pointcloud</p>
</li>
<li>
<p><code>/airsim_node/instance_segmentation_labels</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/InstanceSegmentationList.msg">airsim_interfaces::InstanceSegmentationList</a>
  Custom message type with an array of a custom messages that are the names, color and index of the instance segmentation system for each object in the world.</p>
</li>
<li>
<p><code>/airsim_node/object_transforms</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/ObjectTransformsList.msg">airsim_interfaces::ObjectTransformsList</a>
  Custom message type with an array of <a href="http://docs.ros.org/api/geometry_msgs/html/msg/TransformStamped.html">geometry_msgs::TransformStamped</a> that are the transforms of all objects in the world, each child frame ID is the object name.</p>
</li>
</ul>
<h4 id="subscribers">Subscribers:</h4>
<ul>
<li>
<p><code>/airsim_node/VEHICLE-NAME/vel_cmd_body_frame</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/VelCmd.msg">airsim_interfaces::VelCmd</a></p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/vel_cmd_world_frame</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/VelCmd.msg">airsim_interfaces::VelCmd</a></p>
</li>
<li>
<p><code>/airsim_node/all_robots/vel_cmd_body_frame</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/VelCmd.msg">airsim_interfaces::VelCmd</a>
  Set velocity command for all drones.</p>
</li>
<li>
<p><code>/airsim_node/all_robots/vel_cmd_world_frame</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/VelCmd.msg">airsim_interfaces::VelCmd</a></p>
</li>
<li>
<p><code>/airsim_node/group_of_robots/vel_cmd_body_frame</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/VelCmdGroup.msg">airsim_interfaces::VelCmdGroup</a>
  Set velocity command for a specific set of drones.</p>
</li>
<li></li>
<li>
<p><code>/airsim_node/group_of_robots/vel_cmd_world_frame</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/VelCmdGroup.msg">airsim_interfaces::VelCmdGroup</a>
  Set velocity command for a specific set of drones.</p>
</li>
<li>
<p><code>/gimbal_angle_euler_cmd</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/GimbalAngleEulerCmd.msg">airsim_interfaces::GimbalAngleEulerCmd</a>
  Gimbal set point in euler angles.</p>
</li>
<li>
<p><code>/gimbal_angle_quat_cmd</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/GimbalAngleQuatCmd.msg">airsim_interfaces::GimbalAngleQuatCmd</a>
  Gimbal set point in quaternion.</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/car_cmd</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/CarControls.msg">airsim_interfaces::CarControls</a>
Throttle, brake, steering and gear selections for control. Both automatic and manual transmission control possible, see the <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros/src/airsim_ros_pkgs/scripts/car_joy"><code>car_joy.py</code></a> script for use.</p>
</li>
</ul>
<h4 id="services">Services:</h4>
<ul>
<li>
<p><code>/airsim_node/VEHICLE-NAME/land</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/srv/Land.html">airsim_interfaces::Land</a></p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/takeoff</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/srv/Takeoff.html">airsim_interfaces::Takeoff</a></p>
</li>
<li>
<p><code>/airsim_node/all_robots/land</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/srv/Land.html">airsim_interfaces::Land</a>
 land all drones</p>
</li>
<li>
<p><code>/airsim_node/all_robots/takeoff</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/srv/Takeoff.html">airsim_interfaces::Takeoff</a>
 take-off all drones</p>
</li>
<li>
<p><code>/airsim_node/group_of_robots/land</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/srv/LandGroup.html">airsim_interfaces::LandGroup</a>
 land a specific set of drones</p>
</li>
<li>
<p><code>/airsim_node/group_of_robots/takeoff</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/srv/TakeoffGroup.html">airsim_interfaces::TakeoffGroup</a>
 take-off a specific set of drones</p>
</li>
<li>
<p><code>/airsim_node/reset</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/srv/Reset.html">airsim_interfaces::Reset</a>
 Resets <em>all</em> vehicles</p>
</li>
<li>
<p><code>/airsim_node/instance_segmentation_refresh</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/srv/RefreshInstanceSegmentation.html">airsim_interfaces::RefreshInstanceSegmentation</a>
 Refresh the instance segmentation list</p>
</li>
<li>
<p><code>/airsim_node/object_transforms_refresh</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/srv/RefreshObjectTransforms.html">airsim_interfaces::RefreshObjectTransforms</a>
 Refresh the object transforms list</p>
</li>
</ul>
<h4 id="parameters">Parameters:</h4>
<ul>
<li>
<p><code>/airsim_node/host_ip</code> [string]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: localhost
  The IP of the machine running the airsim RPC API server.</p>
</li>
<li>
<p><code>/airsim_node/host_port</code> [string]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: 41451
  The port of the machine running the airsim RPC API server.</p>
</li>
<li>
<p><code>/airsim_node/enable_api_control</code> [string]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: false
  Set the API control and arm the drones on startup. If not set to true no control is available. </p>
</li>
<li>
<p><code>/airsim_node/enable_object_transforms_list</code> [string]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: true
  Retrieve the object transforms list from the airsim API at the start or with the service to refresh. If disabled this is not available but can save time on startup.</p>
</li>
<li>
<p><code>/airsim_node/host_port</code> [string]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: 41451
  The port of the machine running the airsim RPC API server.</p>
</li>
<li>
<p><code>/airsim_node/is_vulkan</code> [string]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: True
  If using Vulkan, the image encoding is switched from rgb8 to bgr8. </p>
</li>
<li>
<p><code>/airsim_node/world_frame_id</code> [string]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: world</p>
</li>
<li>
<p><code>/airsim_node/odom_frame_id</code> [string]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: odom_local</p>
</li>
<li>
<p><code>/airsim_node/update_airsim_control_every_n_sec</code> [double]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: 0.01 seconds.
  Timer callback frequency for updating drone odom and state from airsim, and sending in control commands.
  The current RPClib interface to unreal engine maxes out at 50 Hz.
  Timer callbacks in ROS run at maximum rate possible, so it's best to not touch this parameter.</p>
</li>
<li>
<p><code>/airsim_node/update_airsim_img_response_every_n_sec</code> [double]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: 0.01 seconds.
  Timer callback frequency for receiving images from all cameras in airsim.
  The speed will depend on number of images requested and their resolution.
  Timer callbacks in ROS run at maximum rate possible, so it's best to not touch this parameter.</p>
</li>
<li>
<p><code>/airsim_node/update_lidar_every_n_sec</code> [double]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: 0.01 seconds.
  Timer callback frequency for receiving images from all Lidar data in airsim.
  Timer callbacks in ROS run at maximum rate possible, so it's best to not touch this parameter.</p>
</li>
<li>
<p><code>/airsim_node/update_gpulidar_every_n_sec</code> [double]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: 0.01 seconds.
  Timer callback frequency for receiving images from all GPU-Lidar data in airsim.
  Timer callbacks in ROS run at maximum rate possible, so it's best to not touch this parameter.</p>
</li>
<li>
<p><code>/airsim_node/update_echo_every_n_sec</code> [double]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: 0.01 seconds.
  Timer callback frequency for receiving images from all echo sensor data in airsim.
  Timer callbacks in ROS run at maximum rate possible, so it's best to not touch this parameter.</p>
</li>
<li>
<p><code>/airsim_node/publish_clock</code> [double]
  Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code>
  Default: false
  Will publish the ros /clock topic if set to true.</p>
</li>
</ul>
<h3 id="simple-pid-position-controller-node">Simple PID Position Controller Node</h3>
<h4 id="parameters_1">Parameters:</h4>
<ul>
<li>PD controller parameters:</li>
<li>
<p><code>/pd_position_node/kp_x</code> [double],
    <code>/pd_position_node/kp_y</code> [double],
    <code>/pd_position_node/kp_z</code> [double],
    <code>/pd_position_node/kp_yaw</code> [double]
    Proportional gains</p>
</li>
<li>
<p><code>/pd_position_node/kd_x</code> [double],
    <code>/pd_position_node/kd_y</code> [double],
    <code>/pd_position_node/kd_z</code> [double],
    <code>/pd_position_node/kd_yaw</code> [double]
    Derivative gains</p>
</li>
<li>
<p><code>/pd_position_node/reached_thresh_xyz</code> [double]
    Threshold euler distance (meters) from current position to setpoint position</p>
</li>
<li>
<p><code>/pd_position_node/reached_yaw_degrees</code> [double]
    Threshold yaw distance (degrees) from current position to setpoint position</p>
</li>
<li>
<p><code>/pd_position_node/update_control_every_n_sec</code> [double]
  Default: 0.01 seconds</p>
</li>
</ul>
<h4 id="services_1">Services:</h4>
<ul>
<li>
<p><code>/airsim_node/VEHICLE-NAME/gps_goal</code> [Request: <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros/src/airsim_ros_pkgs/srv/SetGPSPosition.srv">airsim_interfaces::SetGPSPosition</a>]
  Target gps position + yaw.
  In <strong>absolute</strong> altitude.</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/local_position_goal</code> [Request: <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros/src/airsim_ros_pkgs/srv/SetLocalPosition.srv">airsim_interfaces::SetLocalPosition</a>]
  Target local position + yaw in global frame.</p>
</li>
</ul>
<h4 id="subscribers_1">Subscribers:</h4>
<ul>
<li>
<p><code>/airsim_node/origin_geo_point</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/GPSYaw.msg">airsim_interfaces::GPSYaw</a>
  Listens to home geo coordinates published by <code>airsim_node</code>.</p>
</li>
<li>
<p><code>/airsim_node/VEHICLE-NAME/odom_local</code> <a href="https://docs.ros.org/api/nav_msgs/html/msg/Odometry.html">nav_msgs::Odometry</a>
  Listens to odometry published by <code>airsim_node</code></p>
</li>
</ul>
<h4 id="publishers_1">Publishers:</h4>
<ul>
<li>
<p><code>/vel_cmd_world_frame</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/VelCmd.msg">airsim_interfaces::VelCmd</a>
  Sends velocity command to <code>airsim_node</code></p>
</li>
<li>
<p><code>/vel_cmd_body_frame</code> <a href="https://github.com/Cosys-Lab/Cosys-AirSim/blob/main/ros2/src/airsim_interfaces/msg/VelCmd.msg">airsim_interfaces::VelCmd</a>
  Sends velocity command to <code>airsim_node</code></p>
</li>
</ul>
<h4 id="global-params">Global params</h4>
<ul>
<li>
<p>Dynamic constraints. These can be changed in <code>dynamic_constraints.launch</code>:</p>
<ul>
<li>
<p><code>/max_vel_horz_abs</code> [double]
  Maximum horizontal velocity of the drone (meters/second)</p>
</li>
<li>
<p><code>/max_vel_vert_abs</code> [double]
  Maximum vertical velocity of the drone (meters/second)</p>
</li>
<li>
<p><code>/max_yaw_rate_degree</code> [double]
  Maximum yaw rate (degrees/second)</p>
</li>
</ul>
</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../ros_python/" class="btn btn-neutral float-left" title="ROS: AirSim ROS Python Wrapper"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../matlab/" class="btn btn-neutral float-right" title="Matlab">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Cosys-Lab/Cosys-AirSim" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../ros_python/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../matlab/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6" defer></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
